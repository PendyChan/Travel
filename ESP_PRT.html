<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 è¥¿è‘¡ä¹‹æ—…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fdfbf7; /* Warm neutral background */
            color: #2d3436;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #d4a373;
            border-radius: 4px;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        /* Tab active state */
        .tab-active {
            border-bottom: 3px solid #e17055; /* Terracotta */
            color: #e17055;
            font-weight: 700;
        }
        .tab-inactive {
            color: #636e72;
        }
        .tab-inactive:hover {
            color: #e17055;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-gray-800">Iberia<span style="color:#e17055">2026</span></span>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="scrollToSection('overview')" class="text-gray-600 hover:text-orange-600 px-3 py-2 text-sm font-medium">ç¸½è¦½</button>
                    <button onclick="scrollToSection('itinerary')" class="text-gray-600 hover:text-orange-600 px-3 py-2 text-sm font-medium">æ¯æ—¥è¡Œç¨‹</button>
                    <button onclick="scrollToSection('logistics')" class="text-gray-600 hover:text-orange-600 px-3 py-2 text-sm font-medium">äº¤é€šç´°ç¯€</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="bg-[#faeee7] border-b border-orange-100">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl font-extrabold text-gray-900 sm:text-5xl md:text-6xl">
                è¥¿è‘¡ä¹‹æ—…
            </h1>
            <p class="mt-4 max-w-2xl mx-auto text-xl text-gray-600">
                2026å¹´2æœˆ14æ—¥ - 2æœˆ27æ—¥ | é‡Œæ–¯æœ¬ â€¢ ç“¦å€«è¥¿äº â€¢ é¦¬å¾·é‡Œ â€¢ éš†é”
            </p>
            <div class="mt-8 flex justify-center gap-4">
                <div class="bg-white p-4 rounded-lg shadow-lg border border-orange-200">
                    <div class="text-3xl font-bold text-[#e17055]">13</div>
                    <div class="text-lg text-gray-500">å¤©æ•¸</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-lg border border-orange-200">
                    <div class="text-3xl font-bold text-[#e17055]">4</div>
                    <div class="text-lg text-gray-500">åŸå¸‚</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-lg border border-orange-200">
                    <div class="text-3xl font-bold text-[#e17055]">1</div>
                    <div class="text-lg text-gray-500">çƒè³½</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overview & Stats -->
    <section id="overview" class="max-w-7xl mx-auto py-12 px-4 lg:px-6 lg:px-8">
        <div class="flex justify-center">
            <!-- Timeline Chart -->
            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 w-full max-w-2xl">
                <div class="mb-4">
                    <h2 class="text-xl font-bold text-gray-800">è¡Œç¨‹æ™‚é–“è»¸</h2>
                    <p class="text-sm text-gray-500">å„åŸå¸‚åœç•™æ™‚é–“åˆ†ä½ˆ</p>
                </div>
                <div class="chart-container">
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Itinerary -->
    <section id="itinerary" class="bg-white py-12 border-t border-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-900">æ¯æ—¥è©³ç´°è¡Œç¨‹</h2>
                <p class="mt-2 text-gray-600">é»æ“Šä¸‹æ–¹åŸå¸‚åˆ‡æ›æŸ¥çœ‹æ·±åº¦å®‰æ’</p>
            </div>

            <!-- City Tabs -->
            <div class="flex justify-center space-x-2 md:space-x-8 border-b border-gray-200 mb-8 overflow-x-auto">
                <button onclick="switchCity('lisbon')" id="tab-lisbon" class="tab-active px-4 py-4 text-sm md:text-lg font-medium focus:outline-none whitespace-nowrap">
                    é‡Œæ–¯æœ¬ & è¾›ç‰¹æ‹‰ (2/14-18)
                </button>
                <button onclick="switchCity('valencia')" id="tab-valencia" class="tab-inactive px-4 py-4 text-sm md:text-lg font-medium focus:outline-none whitespace-nowrap">
                    ç“¦å€«è¥¿äº (2/18-21)
                </button>
                <button onclick="switchCity('madrid')" id="tab-madrid" class="tab-inactive px-4 py-4 text-sm md:text-lg font-medium focus:outline-none whitespace-nowrap">
                    é¦¬å¾·é‡Œ & é¾é” (2/21-27)
                </button>
            </div>

            <!-- Dynamic Content Area -->
            <div id="itinerary-content" class="min-h-[500px]">
                <!-- Content injected via JS -->
            </div>
        </div>
    </section>

    <!-- Logistics Dashboard -->
    <section id="logistics" class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 bg-[#fdfbf7]">
        <div class="mb-8">
            <h2 class="text-3xl font-bold text-gray-900">é—œéµäº¤é€šèˆ‡é ç®—</h2>
            <p class="mt-2 text-gray-600">è·¨åœ‹ç§»å‹•èˆ‡é•·é€”æ—…è¡Œçš„é‡è¦æç¤º</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Transport Cards -->
            <div class="lg:col-span-2 space-y-4">
                <div class="bg-white p-6 rounded-lg shadow border-l-4 border-orange-500">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="text-lg font-bold text-gray-800">âœˆï¸ é‡Œæ–¯æœ¬ (LIS) â ç“¦å€«è¥¿äº (VLC)</h3>
                            <p class="text-sm text-gray-500 mt-1">æ—¥æœŸ: 2æœˆ18æ—¥ (é€±ä¸‰)</p>
                        </div>
                        <span class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">å¿…é ˆæå‰é è¨‚</span>
                    </div>
                    <p class="mt-3 text-gray-700 text-sm">
                        é€™æ˜¯æ­¤è¡Œæœ€å›°é›£çš„ç§»å‹•ã€‚å…©åœ°ä¹‹é–“æ²’æœ‰ç›´é”ç«è»Šï¼ˆéœ€ç¶“é¦¬å¾·é‡Œè½‰è»Šè€—æ™‚9å°æ™‚ï¼‰ã€‚
                        <br><strong>å»ºè­°:</strong> æ­ä¹˜ TAP Portugal æˆ– Ryanair ç›´é£›èˆªç­ï¼ˆç´„ 1.5 å°æ™‚ï¼‰ã€‚
                        <br><em>é ç®—: â‚¬50 - â‚¬120 (å–®ç¨‹å«è¡Œæ)</em>
                    </p>
                </div>

                <div class="bg-white p-6 rounded-lg shadow border-l-4 border-blue-500">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="text-lg font-bold text-gray-800">ğŸš… ç“¦å€«è¥¿äº â é¦¬å¾·é‡Œ</h3>
                            <p class="text-sm text-gray-500 mt-1">æ—¥æœŸ: 2æœˆ21æ—¥ (é€±å…­)</p>
                        </div>
                        <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">AVE / Iryo / Ouigo</span>
                    </div>
                    <p class="mt-3 text-gray-700 text-sm">
                        è¥¿ç­ç‰™é«˜éµéå¸¸ç™¼é”ã€‚è»Šç¨‹ç´„ 1å°æ™‚50åˆ†ã€‚
                        <br><strong>å»ºè­°:</strong> é è¨‚ä¸­åˆå·¦å³çš„ç­æ¬¡ï¼ŒæŠµé”é¦¬å¾·é‡Œå¾Œå‰›å¥½ Check-in ä¸¦ç‚ºéš”å¤©çƒè³½æš–èº«ã€‚
                        <br><em>é ç®—: â‚¬20 - â‚¬50</em>
                    </p>
                </div>

                <div class="bg-white p-6 rounded-lg shadow border-l-4 border-red-500">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="text-lg font-bold text-gray-800">ğŸš„ é¦¬å¾·é‡Œ â‡„ é¾é” (Ronda) ä¸€æ—¥éŠ</h3>
                            <p class="text-sm text-gray-500 mt-1">æ—¥æœŸ: 2æœˆ23æ—¥ (é€±ä¸€)</p>
                        </div>
                        <span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">é«˜é›£åº¦é è­¦</span>
                    </div>
                    <p class="mt-3 text-gray-700 text-sm">
                        é¦¬å¾·é‡Œè·é›¢é¾é”éå¸¸é ã€‚é€™ä¸æ˜¯å…¸å‹çš„ä¸€æ—¥éŠè·é›¢ã€‚
                        <br><strong>äº¤é€šæ–¹æ¡ˆ:</strong> é¦¬å¾·é‡Œ Atocha æ­ä¹˜é«˜éµè‡³ <strong>Antequera-Santa Ana</strong> æˆ– <strong>CÃ³rdoba</strong> (ç´„ 1.5-2å°æ™‚)ï¼Œå†è½‰ä¹˜å€é–“ç«è»Šæˆ–å·´å£«è‡³ Ronda (ç´„ 1-1.5å°æ™‚)ã€‚å–®ç¨‹ç¸½è€—æ™‚ç´„ 3.5-4 å°æ™‚ã€‚
                        <br><strong>å»ºè­°:</strong> å¿…é ˆæ­ä¹˜æ—©ä¸Š 07:00 çš„ç«è»Šï¼Œä¸¦é è¨ˆæ™šä¸Š 22:00 å›åˆ°é¦¬å¾·é‡Œã€‚é›–ç„¶è¾›è‹¦ï¼Œä½†å³½è°·æ™¯è‰²å€¼å¾—ã€‚
                    </p>
                </div>
            </div>

            <!-- Budget Chart -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-bold text-gray-800 mb-4">é ç®—åˆ†é…ä¼°ç®—</h3>
                <div class="chart-container" style="height: 300px;">
                    <canvas id="budgetChart"></canvas>
                </div>
                <div class="mt-4 text-xs text-gray-500 text-center">
                    *ä¸å«åœ‹éš›æ©Ÿç¥¨ï¼Œä»¥ä¸­é«˜èˆ’é©åº¦ä¼°ç®—
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-2">2026 Spain & Portugal Trip Planner</p>
            <p class="text-gray-400 text-sm">Designed for Exploration, Not Just Tourism.</p>
        </div>
    </footer>

    <script>
        // --- Data Layer ---
        const itineraryData = {
            lisbon: [
                {
                    date: "2/14 (å…­)",
                    title: "æŠµé”é‡Œæ–¯æœ¬",
                    activities: [
                        { time: "23:25", desc: "æŠµé”é‡Œæ–¯æœ¬æ©Ÿå ´ (LIS)", highlight: true },
                        { time: "00:30", desc: "æ­ä¹˜ Bolt/Uber å‰å¾€å¸‚å€é£¯åº— (å»ºè­°ä½ Intendente æˆ– PrÃ­ncipe Real å€ï¼Œè¼ƒæœ‰å€‹æ€§)", highlight: false }
                    ]
                },
                {
                    date: "2/15 (æ—¥)",
                    title: "ç¶“å…¸é‡Œæ–¯æœ¬èˆ‡çµ•ç¾è¦–é‡",
                    activities: [
                        { time: "09:30", type: "MUST", desc: "**Breakfast Lovers MisericÃ³rdia**ã€‚å¾ ä½å®¿ æ­åœ°éµè—ç·šåˆ° Baixa-Chiadoï¼Œäº«å—æ‚¨æŒ‡å®šçš„è±ç››æ—©é¤ã€‚", highlight: true },
                        { time: "11:30", type: "MUST", desc: "æ­¥è¡Œè‡³é™„è¿‘çš„ **Manteigaria**ã€‚è²·ä¸€ç›’è›‹å¡”ï¼Œæ„Ÿå—é‚£ç¨®é…¥è„†æ„Ÿã€‚", highlight: true },
                        { time: "14:00", type: "MUST", desc: "å‰å¾€ **è–è‹¥ç†±åŸå ¡ (Castelo de SÃ£o Jorge)**ã€‚æ¼«æ­¥å¤åŸç‰†ï¼Œä¿¯ç°è€åŸç´…è‰²å±‹é ‚ã€‚", highlight: true },
                        { time: "17:00", type: "MUST", desc: "**å±±ä¸Šè–æ¯è§€æ™¯å° (Senhora do Monte)**ã€‚å¾åŸå ¡æ­¥è¡Œç©¿é GraÃ§a å€å³å¯æŠµé”ï¼Œé€™è£¡æ˜¯é‡Œæ–¯æœ¬çœ‹å¤•é™½æœ€ç¥è–çš„åœ°é»ã€‚", highlight: true },
                        { time: "19:30", type: "GOOGLE", desc: "æ™šé¤ï¼š**Cervejaria Ramiro**ã€‚å¾è§€æ™¯å°ä¸‹å±±æ­¥è¡Œå³å¯åˆ°é”é€™é–“åœ°åœ–ä¸Šçš„æµ·é®®ååº—ã€‚", highlight: false }
                    ]
                },
                {
                    date: "2/16 (ä¸€)",
                    title: "è²å€«å‚³å¥‡èˆ‡å°å²¸ç§˜å¢ƒ",
                    activities: [
                        { time: "09:30", type: "MUST", desc: "**ç†±ç¾…å°¼è«æ–¯ä¿®é“é™¢ (Mosteiro dos JerÃ³nimos)**ã€‚å»ºè­°é ç´„æœ€æ—©å ´æ¬¡ï¼Œé¿é–‹å¤§æ‰¹è§€å…‰åœ˜ã€‚", highlight: true },
                        { time: "11:30", type: "MUST", desc: "**Casa PastÃ©is de BelÃ©m**ã€‚å°±åœ¨ä¿®é“é™¢éš”å£ï¼Œé«”é©—å§‹ç¥–åº—çš„å…§ç”¨æ°›åœã€‚", highlight: true },
                        { time: "14:00", type: "GOOGLE", desc: "å›ç¨‹ç¶“é **LX Factory**ã€‚é€›é€›è¨­è¨ˆé¸ç‰©èˆ‡æ›¸åº—ï¼Œæ„Ÿå—æ¸…å–®ä¸­çš„å·¥æ¥­å»¢å¢Ÿé¢¨æ ¼ã€‚", highlight: false },
                        { time: "17:30", type: "GOOGLE", desc: "**Ponto Final (Almada)**ã€‚æ­èˆ¹å»å°å²¸ï¼Œåœ¨æ²³é‚Šäº«å—æœ€æµªæ¼«çš„æœ€å¾Œä¸€æ™šæ™šé¤ã€‚", highlight: true }
                    ]
                },
                {
                    date: "2/17 (äºŒ)",
                    title: "è¾›ç‰¹æ‹‰ (Sintra) ç¥ç§˜ä¸€æ—¥éŠ",
                    intro: "è¾›ç‰¹æ‹‰ä¸åƒ…åƒ…æ˜¯ä½©ç´å®®ã€‚æˆ‘å€‘è¦å»æ›´ç¥ç§˜çš„åœ°æ–¹ã€‚",
                    activities: [
                        { time: "08:30", desc: "æ­ä¹˜ç«è»Šå‰å¾€è¾›ç‰¹æ‹‰ã€‚", highlight: false },
                        { time: "10:00", desc: "å‰å¾€ **Quinta da Regaleira (é›·åŠ èŠæ‹‰èŠåœ’)**ã€‚é€™è£¡æœ‰è‘—åçš„ã€Œå•Ÿè’™æ·±äº•ã€å’Œå……æ»¿è±¡å¾µæ„ç¾©çš„åœ°ä¸‹è¿·å®®ï¼Œæ°£æ°›ç¥ç§˜ã€‚", highlight: true },
                        { time: "13:30", desc: "åœ¨è¾›ç‰¹æ‹‰èˆŠåŸå€åˆé¤ï¼Œå“åš Travesseiros ç”œé»ã€‚", highlight: false },
                        { time: "15:00", desc: "å‰å¾€ **Monserrate Palace (è’™å¡æ‹‰ç‰¹å®®)**ã€‚é€™æ˜¯èåˆäº†é˜¿æ‹‰ä¼¯èˆ‡å“¥å¾·é¢¨æ ¼çš„ç²¾ç·»å®®æ®¿ï¼Œæ“æœ‰çµ•ç¾çš„ç•°åœ‹æ¤ç‰©åœ’ï¼ŒéŠå®¢ç¨€å°‘ï¼Œæ¥µåº¦å¯§éœã€‚", highlight: true },
                        { time: "19:00", desc: "è¿”å›é‡Œæ–¯æœ¬ã€‚", highlight: false }
                    ]
                }
            ],
            valencia: [
                {
                    date: "2/18 (ä¸‰)",
                    title: "é£›å‘åœ°ä¸­æµ·ï¼šç“¦å€«è¥¿äº",
                    intro: "å¾å¤§è¥¿æ´‹å²¸é£›å¾€åœ°ä¸­æµ·ï¼Œæ„Ÿå—æˆªç„¶ä¸åŒçš„é™½å…‰èˆ‡ç¾ä»£æ„Ÿã€‚",
                    activities: [
                        { time: "ä¸Šåˆ", desc: "æ­ä¹˜é£›æ©Ÿå‰å¾€ç“¦å€«è¥¿äº (VLC)ã€‚", highlight: true },
                        { time: "14:00", desc: "å…¥ä½ **Ruzafa** å€ã€‚é€™è£¡æ˜¯ç“¦å€«è¥¿äºçš„ Hipster å€ï¼Œå……æ»¿å¾©å¤åº—ã€å’–å•¡å»³å’Œè—å»Šã€‚", highlight: false },
                        { time: "16:30", desc: "ç§Ÿå€Ÿè‡ªè¡Œè»Šï¼Œæ²¿è‘— **Turia Gardens (åœ–é‡ŒäºèŠ±åœ’)** é¨è¡Œã€‚é€™æ˜¯ç”±ä¹¾æ¶¸æ²³åºŠæ”¹å»ºçš„å¸¶ç‹€å…¬åœ’ï¼Œç©¿è¶Šæ•´å€‹åŸå¸‚ï¼Œéå¸¸èˆ’é©ã€‚", highlight: true },
                        { time: "19:00", desc: "åœ¨ **Mercado de ColÃ³n** (å“¥å€«å¸ƒå¸‚å ´) äº«ç”¨ Tapas æ™šé¤ã€‚é€™è£¡å»ºç¯‰è¯éº—ï¼Œæ¯”ä¸­å¤®å¸‚å ´æ›´é©åˆå¤œé–“èšé¤ã€‚", highlight: false }
                    ]
                },
                {
                    date: "2/19 (å››)",
                    title: "æœªä¾†èˆ‡å‚³çµ±",
                    intro: "ç“¦å€«è¥¿äºæ˜¯è¥¿ç­ç‰™æµ·é®®ç‡‰é£¯(Paella)çš„ç™¼æºåœ°ã€‚",
                    activities: [
                        { time: "10:00", desc: "åƒè§€ **è—è¡“ç§‘å­¸åŸ (City of Arts and Sciences)**ã€‚å³ä½¿ä¸é€²å»æ°´æ—é¤¨ï¼Œå…‰æ˜¯å»ºç¯‰æœ¬èº«ï¼ˆCalatrava è¨­è¨ˆï¼‰å°±å€¼å¾—èŠ±åŠå¤©æ‹ç…§ã€‚", highlight: true },
                        { time: "13:30", desc: "å‰å¾€æµ·é‚Šçš„ **Malvarrosa** æµ·ç˜ï¼Œåœ¨è€å­—è™Ÿé¤å»³äº«ç”¨æ­£å®—çš„ **Paella Valenciana** (æ³¨æ„ï¼šæ­£å®—çš„æ˜¯åŠ å…”è‚‰èˆ‡é›è‚‰ï¼Œä¸æ˜¯æµ·é®®)ã€‚", highlight: true },
                        { time: "16:00", desc: "æ¼«æ­¥ **El Carmen** èˆŠåŸå€ï¼Œå°‹æ‰¾è‘—åçš„è¡—é ­å¡—é´‰è—è¡“ã€‚", highlight: false }
                    ]
                },
                {
                    date: "2/20 (äº”)",
                    title: "è‡ªç„¶ç§˜å¢ƒ Albufera",
                    intro: "ç¨å¾®é é›¢å¸‚å€ï¼Œäº«å—å¯§éœçš„æ—¥è½ã€‚",
                    activities: [
                        { time: "10:00", desc: "å‰å¾€ **çµ²ç¶¢äº¤æ˜“æ‰€ (La Lonja de la Seda)**ï¼Œå“¥å¾·å¼å»ºç¯‰çš„å‚‘ä½œ (UNESCO ä¸–ç•Œéºç”¢)ã€‚", highlight: false },
                        { time: "15:00", desc: "æ­ä¹˜å…¬è»Šå‰å¾€ **Albufera Natural Park**ã€‚", highlight: true },
                        { time: "17:00", desc: "æ­ä¹˜å‚³çµ±æœ¨èˆ¹éŠæ¹–ï¼Œé€™è£¡æ˜¯è¥¿ç­ç‰™è§€è³æ—¥è½æœ€ç¾çš„åœ°æ–¹ä¹‹ä¸€ã€‚æ„Ÿå—ã€Œæ°´ç¨»ç”°ã€èˆ‡å¹³éœæ¹–é¢çš„å€’å½±ã€‚", highlight: true },
                        { time: "20:30", desc: "å›åˆ°å¸‚å€ï¼Œäº«å—ç“¦å€«è¥¿äºçš„å¤œç”Ÿæ´»ã€‚", highlight: false }
                    ]
                }
            ],
            madrid: [
                {
                    date: "2/21 (å…­)",
                    title: "å‰é€²é¦¬å¾·é‡Œ",
                    activities: [
                    ]
                },
                {
                    date: "2/22 (æ—¥)",
                    title: "âš½ æ¯”è³½æ—¥ Match Day",
                    intro: "ä»Šæ—¥é‡å¿ƒå…¨åœ¨çƒè³½ã€‚è¥¿ç”²çš„æ°£æ°›åœ¨é–‹è³½å‰å…©å°æ™‚å°±é–‹å§‹äº†ã€‚",
                    activities: [
                    ]
                },
                {
                    date: "2/23 (ä¸€)",
                    title: "æ‡¸å´–ä¹‹åŸï¼šéš†é” (Ronda) é å¾",
                    activities: [
                    ]
                },
                {
                    date: "2/24 (äºŒ)",
                    title: "é¦¬å¾·é‡Œ",
                    intro: "é¿é–‹çš‡å®®ï¼Œå»ä¸€äº›åœ¨åœ°äººå–œæ„›çš„æ–‡åŒ–æ“šé»ã€‚",
                    activities: [
                    ]
                },
                {
                    date: "2/25 (ä¸‰)",
                    title: "æœ€å¾Œçš„æ¼«æ­¥èˆ‡å‘Šåˆ¥",
                    activities: [
                    ]
                },
                {
                    date: "2/26 (å››)",
                    title: "è¿”å›é‡Œæ–¯æœ¬",
                    activities: [
                    ]
                },
                {
                    date: "2/27 (äº”)",
                    title: "è¿”ç¨‹",
                    activities: [
                        { time: "05:55", desc: "é‡Œæ–¯æœ¬æ©Ÿå ´èµ·é£›ã€‚å¸¶è‘—æ»¿æ»¿å›æ†¶å›å®¶ã€‚", highlight: true }
                    ]
                }
            ]
        };

        // --- Logic Layer ---

        // 1. Initialize Charts
        function initCharts() {
            // Timeline Chart
            const ctxTimeline = document.getElementById('timelineChart').getContext('2d');
            new Chart(ctxTimeline, {
                type: 'bar',
                data: {
                    labels: ['é‡Œæ–¯æœ¬ (é¦–)', 'ç“¦å€«è¥¿äº', 'é¦¬å¾·é‡Œ', 'é‡Œæ–¯æœ¬ (æœ«)'],
                    datasets: [{
                        label: 'å¤©æ•¸',
                        data: [ [14, 18], [18, 21], [21, 26], [26, 27] ], // Simplified date ranges
                        backgroundColor: [
                            'rgba(225, 112, 85, 0.8)', // Terracotta
                            'rgba(253, 203, 110, 0.8)', // Mustard
                            'rgba(116, 185, 255, 0.8)', // Blue
                            'rgba(225, 112, 85, 0.8)'
                        ],
                        borderColor: [
                            'rgba(225, 112, 85, 1)',
                            'rgba(253, 203, 110, 1)',
                            'rgba(116, 185, 255, 1)',
                            'rgba(225, 112, 85, 1)'
                        ],
                        borderWidth: 1,
                        barPercentage: 0.6
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const raw = context.raw;
                                    return `2æœˆ${raw[0]}æ—¥ - 2æœˆ${raw[1]}æ—¥`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            min: 14,
                            max: 27,
                            title: { display: true, text: '2026å¹´ 2æœˆæ—¥æœŸ' },
                            ticks: { stepSize: 1 }
                        }
                    }
                }
            });

            // Budget Chart
            const ctxBudget = document.getElementById('budgetChart').getContext('2d');
            new Chart(ctxBudget, {
                type: 'doughnut',
                data: {
                    labels: ['ä½å®¿', 'åŸéš›äº¤é€š', 'é¤é£²', 'é–€ç¥¨/çƒè³½', 'è³¼ç‰©/é›œæ”¯'],
                    datasets: [{
                        data: [40, 20, 20, 10, 10],
                        backgroundColor: [
                            '#d4a373', // Sand
                            '#e17055', // Terracotta
                            '#fab1a0', // Light Orange
                            '#74b9ff', // Blue (Football)
                            '#b2bec3'  // Grey
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right' }
                    }
                }
            });
        }

        // 2. City Switching Logic
        function switchCity(cityKey) {
            // Update Tabs
            document.querySelectorAll('button[id^="tab-"]').forEach(btn => {
                btn.className = "tab-inactive px-4 py-4 text-sm md:text-lg font-medium focus:outline-none whitespace-nowrap";
            });
            document.getElementById(`tab-${cityKey}`).className = "tab-active px-4 py-4 text-sm md:text-lg font-medium focus:outline-none whitespace-nowrap";

            // Render Content
            const container = document.getElementById('itinerary-content');
            container.innerHTML = ''; // Clear

            const days = itineraryData[cityKey];
            
            // Create Grid
            const grid = document.createElement('div');
            grid.className = "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6";

            days.forEach(day => {
                const card = document.createElement('div');
                card.className = "bg-white rounded-lg shadow border border-gray-100 p-6 card-hover flex flex-col h-full";
                
                // Card Header
                let headerHTML = `
                    <div class="flex justify-between items-center mb-4 pb-2 border-b border-gray-100">
                        <span class="text-orange-600 font-bold">${day.date}</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">${day.title}</h3>
                `;
                
                if (day.intro) {
                    headerHTML += `<p class="text-sm text-gray-500 mb-4 italic">${day.intro}</p>`;
                }

                // Activities List
                let listHTML = `<ul class="space-y-4 flex-grow">`;
                day.activities.forEach(act => {
                    const highlightClass = act.highlight ? "text-gray-900 font-medium" : "text-gray-500";
                    const icon = act.highlight ? "ğŸ”¹" : "â–«ï¸";
                    listHTML += `
                        <li class="flex items-start text-sm">
                            <span class="mr-2 mt-0.5 text-xs">${icon}</span>
                            <div>
                                <span class="block text-xs text-gray-400 font-mono">${act.time}</span>
                                <span class="${highlightClass}">${parseMarkdown(act.desc)}</span>
                            </div>
                        </li>
                    `;
                });
                listHTML += `</ul>`;

                card.innerHTML = headerHTML + listHTML;
                grid.appendChild(card);
            });

            container.appendChild(grid);
        }

        // Helper to bold text like markdown
        function parseMarkdown(text) {
            return text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        }

        // Scroll Helper
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            switchCity('lisbon'); // Default view
        });

    </script>
</body>
</html>
